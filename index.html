<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>IronPath Pro</title>
<style>
  /* --- RESET --- */
  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body { margin: 0; padding: 20px; background-color: #121212; color: white; font-family: -apple-system, system-ui, sans-serif; overflow-x: hidden; }

  /* --- CONTAINER --- */
  .container {
    max-width: 600px; margin: 0 auto; background-color: #1e1e1e; padding: 25px;
    border-radius: 20px; border: 1px solid #333; position: relative;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  }

  /* --- HEADER ELEMENTS --- */
  h1 { text-align: center; margin: 10px 0 0 0; background: linear-gradient(to right, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 28px; letter-spacing: -1px; }
  p.sub { text-align: center; color: #666; font-size: 11px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 25px; }

  /* --- INFO BUTTON (Top Left) --- */
  .info-btn {
    position: absolute; top: 20px; left: 20px;
    width: 24px; height: 24px; border-radius: 50%; border: 1px solid #555;
    color: #888; display: flex; align-items: center; justify-content: center;
    font-size: 14px; cursor: pointer; font-weight: bold;
  }

  /* --- TOOLS BUTTON (Fixed Top Right) --- */
  .toggle { 
    position: fixed; top: 20px; right: 20px; 
    background: rgba(40,40,40,0.9); backdrop-filter: blur(5px);
    padding: 8px 16px; border-radius: 20px; border: 1px solid #444;
    font-size: 11px; font-weight: bold; cursor: pointer; z-index: 900; 
  }

  /* --- INPUTS --- */
  label { display: block; color: #888; font-size: 11px; font-weight: 700; margin-bottom: 8px; }
  input { width: 100%; padding: 16px; margin-bottom: 20px; background: #121212; border: 1px solid #333; border-radius: 12px; color: white; font-size: 16px; }
  input:focus { outline: none; border-color: #ff4757; }

  /* --- MAIN BUTTON --- */
  .btn-main { width: 100%; padding: 18px; border: none; border-radius: 12px; font-size: 16px; font-weight: 800; cursor: pointer; background: linear-gradient(135deg, #ff4757, #ff6b81); color: white; text-transform: uppercase; }
  .btn-main:active { transform: scale(0.98); }

  /* --- STATS BAR --- */
  #stats-bar { display: none; background: #252525; margin: 20px 0; padding: 15px; border-radius: 10px; text-align: center; border: 1px solid #333; animation: fade 0.5s; }
  .stat-val { color: #2ed573; font-size: 24px; font-weight: 900; }

  /* --- SCHEDULE --- */
  #schedule { margin-top: 30px; display: none; }
  .week { background: #1a1a1a; border-radius: 12px; margin-bottom: 25px; border: 1px solid #2a2a2a; overflow: hidden; }
  .week-head { display: flex; justify-content: space-between; align-items: center; background: #222; padding: 15px 20px; border-bottom: 1px solid #2a2a2a; }
  
  .day-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; cursor: pointer; border-bottom: 1px solid #222; }
  .day-row:last-child { border-bottom: none; }
  
  .tag { font-size: 9px; padding: 3px 6px; border-radius: 4px; color: black; font-weight: 800; margin-left: 8px; text-transform: uppercase; }
  .tag-h { background: #ff4757; } .tag-l { background: #2ed573; } .tag-m { background: #ffa502; }

  /* --- WARMUP --- */
  .warmup { background: #151515; border-left: 3px solid #ffa502; padding: 15px; display: none; }
  .warmup.show { display: block; animation: slide 0.2s; }
  .wu-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px; color: #bbb; }

  /* --- CHECKBOX --- */
  .completed .day-txt { text-decoration: line-through; opacity: 0.4; color: #2ed573; }
  .chk { width: 24px; height: 24px; border: 2px solid #444; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 15px; }
  .completed .chk { background: #2ed573; border-color: #2ed573; }
  .completed .chk::after { content: '✓'; color: black; font-size: 14px; font-weight: bold; }

  /* --- SIDEBAR --- */
  .sidebar { position: fixed; top: 0; right: -100%; width: 85%; max-width: 300px; height: 100%; background: #181818; padding: 25px; border-left: 1px solid #333; transition: right 0.3s; z-index: 1000; overflow-y:auto; }
  .sidebar.active { right: 0; }
  .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; display: none; backdrop-filter: blur(2px); }
  .overlay.active { display: block; }

  /* --- TIMER & PLATE --- */
  .timer-box { background: #222; border-radius: 10px; padding: 15px; border: 1px solid #333; margin-bottom: 30px; text-align: center; }
  .timer-display { font-size: 32px; font-weight: 900; margin: 10px 0; }
  .t-btns { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 10px; }
  .t-btn { background: #333; border: none; color: #ccc; padding: 8px; border-radius: 5px; cursor: pointer; font-weight: bold; }
  .t-stop { width: 100%; background: #ff4757; border: none; color: white; padding: 8px; border-radius: 5px; font-weight: bold; cursor: pointer; }
  
  .plate-box { height: 35px; margin-top: 5px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: black; font-weight: bold; font-size: 12px; }

  /* --- MODAL --- */
  #info-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
  .modal-box { background: #222; padding: 25px; border-radius: 15px; max-width: 400px; border: 1px solid #444; }

  @keyframes slide { from{transform:translateY(-5px);opacity:0} to{transform:translateY(0);opacity:1} }
  @keyframes fade { from{opacity:0} to{opacity:1} }
</style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleSide()"></div>

<div id="info-modal" onclick="this.style.display='none'">
    <div class="modal-box" onclick="event.stopPropagation()">
        <h3 style="margin-top:0; border-bottom:1px solid #444; padding-bottom:10px;">Program Guide</h3>
        <p style="color:#ccc; font-size:14px;">Baechle Linear Periodization cycles intensity to peak strength.</p>
        <div style="margin-bottom:5px; color:#aaa; font-size:13px;"><b style="color:#ff4757">H (Heavy)</b>: 100% Intensity</div>
        <div style="margin-bottom:5px; color:#aaa; font-size:13px;"><b style="color:#2ed573">L (Light)</b>: Recovery (85%)</div>
        <div style="margin-bottom:5px; color:#aaa; font-size:13px;"><b style="color:#ffa502">M (Medium)</b>: Volume (95%)</div>
        <button class="btn-main" style="margin-top:20px; padding:10px; font-size:14px;" onclick="document.getElementById('info-modal').style.display='none'">GOT IT</button>
    </div>
</div>

<div class="toggle" onclick="toggleSide()">TOOLS ⚒</div>

<div class="sidebar" id="side">
  <h4 style="color:#ff4757; margin-top:0;">REST TIMER</h4>
  <div class="timer-box">
      <div class="timer-display" id="t-disp">00:00</div>
      <div class="t-btns">
          <button class="t-btn" onclick="startTimer(90)">90s</button>
          <button class="t-btn" onclick="startTimer(180)">3m</button>
          <button class="t-btn" onclick="startTimer(300)">5m</button>
      </div>
      <button class="t-stop" onclick="stopTimer()">STOP</button>
  </div>

  <h4 style="color:#ff4757; border-top:1px solid #333; padding-top:20px;">PLATE MATH</h4>
  <input type="number" id="pIn" placeholder="Target Weight (45+)">
  <button class="btn-main" style="background:#2ed573; color:black; margin-top:0;" onclick="calcP()">Calculate</button>
  <div id="pOut" style="margin-top:25px;"></div>
</div>

<div class="container">
  <div class="info-btn" onclick="document.getElementById('info-modal').style.display='flex'">?</div>
  <h1>IRONPATH</h1>
  <p class="sub">Baechle 8-Week Engine</p>

  <label>WORKING WEIGHT (LBS)</label>
  <input type="number" id="w" placeholder="e.g. 225">
  <label>REPS PERFORMED</label>
  <input type="number" id="r" placeholder="e.g. 5">

  <button class="btn-main" onclick="gen()">GENERATE PROGRAM</button>

  <div id="stats-bar">
      <span style="color:#888; font-size:11px; text-transform:uppercase;">Estimated 1 Rep Max</span><br>
      <span class="stat-val" id="max-val">0 lbs</span>
  </div>

  <div id="schedule"></div>
  <button id="reset-btn" style="background:transparent; border:1px solid #444; color:#666; width:100%; padding:15px; margin-top:30px; display:none;" onclick="reset()">RESET ALL DATA</button>
  
  <div style="text-align:center; color:#333; font-size:10px; margin-top:20px;">v2.0 - Complete</div>
</div>

<script>
function gen() {
  const w = parseFloat(document.getElementById('w').value);
  const r = parseFloat(document.getElementById('r').value);
  document.activeElement.blur(); 
  if(!w || !r) { alert("Enter numbers"); return; }
  
  const rnd = n => Math.round(n/5)*5;
  const max = rnd(w * (1+(0.033*r)));
  const rm5 = rnd(max*0.87);
  const rm3 = rnd(max*0.93);
  
  document.getElementById('max-val').innerText = max + " lbs";
  document.getElementById('stats-bar').style.display = 'block';
  document.getElementById('reset-btn').style.display = 'block';

  const div = document.getElementById('schedule');
  div.style.display = 'block';
  div.innerHTML = "";

  const weeks = [
    {n:1,t:"BASE",b:rm5,m:.85,r:"5-6"}, {n:2,t:"LOAD",b:rm5,m:.9,r:"5-6"},
    {n:3,t:"INTENSE",b:rm5,m:.95,r:"5-6"}, {n:4,t:"PEAK",b:rm5,m:1.05,r:"5-6"},
    {n:5,t:"UNLOAD",b:rm5,m:.85,r:"2-4",f:.9}, {n:6,t:"SPEED",b:rm3,m:1,r:"2-4",w:.75,f:.85},
    {n:7,t:"FORCE",b:rm3,m:1,r:"2-4",w:.85,f:.9}, {n:8,t:"MAX",b:rm3,m:1,r:"2-3",w:.7,f:.85}
  ];

  weeks.forEach(wk => {
    let m = rnd(wk.b*wk.m);
    let wL = rnd(m*(wk.w||.85)); if(wk.n===4) wL=rnd(m*.8);
    let f = rnd(m*(wk.f||.95));

    const row = (d, l, c, tag) => {
      const id = `w${wk.n}-${d}`;
      const cls = localStorage.getItem(id) ? "completed" : "";
      const w2=rnd(l*.5), w3=rnd(l*.7), w4=rnd(l*.9);
      
      return `
      <div class="${cls}" id="row-${id}">
        <div class="day-row" onclick="document.getElementById('wm-${id}').classList.toggle('show')">
          <div style="display:flex; align-items:center;">
            <div class="chk" onclick="toggle('${id}', event)"></div>
            <b class="day-txt">${d}</b>
          </div>
          <div>
            <b class="day-txt">${l} x ${wk.r}</b> <span class="tag ${c}">${tag}</span> ▾
          </div>
        </div>
        <div id="wm-${id}" class="warmup">
            <div class="wu-row"><span>Set 1 (Empty)</span> <span style="color:#ffa502; font-weight:bold">10 reps @ 45 lbs</span></div>
            <div class="wu-row"><span>Set 2</span> <span style="color:#ffa502; font-weight:bold">5 reps @ ${w2} lbs</span></div>
            <div class="wu-row"><span>Set 3</span> <span style="color:#ffa502; font-weight:bold">3 reps @ ${w3} lbs</span></div>
            <div class="wu-row"><span>Set 4 (Primer)</span> <span style="color:#ffa502; font-weight:bold">1 rep @ ${w4} lbs</span></div>
        </div>
      </div>`;
    };

    div.innerHTML += `
    <div class="week">
      <div class="week-head"><b style="color:white">Week ${wk.n}</b> <span style="color:#ff4757; font-weight:bold; font-size:12px;">${wk.t}</span></div>
      ${row('Mon', m, 'tag-h', 'H')} ${row('Wed', wL, 'tag-l', 'L')} ${row('Fri', f, 'tag-m', 'M')}
    </div>`;
  });
}

function toggle(id, e) {
  e.stopPropagation();
  const row = document.getElementById('row-'+id);
  if(row.classList.contains('completed')) { row.classList.remove('completed'); localStorage.removeItem(id); }
  else { row.classList.add('completed'); localStorage.setItem(id, '1'); }
}

function reset() {
  localStorage.clear();
  document.getElementById('w').value = ''; document.getElementById('r').value = '';
  document.getElementById('schedule').style.display = 'none';
  document.getElementById('stats-bar').style.display = 'none';
  document.getElementById('reset-btn').style.display = 'none';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function toggleSide() { document.getElementById('side').classList.toggle('active'); document.getElementById('overlay').classList.toggle('active'); }

let timer;
function startTimer(s) {
    clearInterval(timer); const end = Date.now() + s * 1000; disp(s);
    timer = setInterval(() => { const left = Math.round((end - Date.now())/1000); if(left<0){clearInterval(timer);document.getElementById('t-disp').innerText="DONE";return;} disp(left); }, 1000);
}
function disp(s) { const m=Math.floor(s/60); const r=s%60; document.getElementById('t-disp').innerText = `${m}:${r<10?'0':''}${r}`; }
function stopTimer() { clearInterval(timer); document.getElementById('t-disp').innerText = "00:00"; }

function calcP() {
  const w = parseFloat(document.getElementById('pIn').value);
  const out = document.getElementById('pOut'); document.activeElement.blur(); 
  if(!w || w<45) { out.innerHTML="<div style='text-align:center; color:orange'>45+ only</div>"; return; }
  let r = (w-45)/2; let h = `<div class='plate-box' style='background:#444; color:white'>BAR (45)</div>`;
  [45,35,25,10,5,2.5].forEach(s => { while(r>=s) { let c="#eee"; if(s==45)c="#45aaf2"; if(s==25)c="#2ed573"; h+=`<div class='plate-box' style='background:${c}'>${s}</div>`; r-=s; } });
  out.innerHTML = h + `<div style='text-align:center; margin-top:10px; color:#2ed573; font-weight:bold'>${(w-45)/2} lbs / side</div>`;
}
</script>
</body>
</html>
